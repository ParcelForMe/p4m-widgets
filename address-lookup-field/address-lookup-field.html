<link rel="import" href="../../polymer/polymer.html" />

<dom-module id="address-lookup-field">
    <template>
        <input placeholder="" type="text" name="alfField" id="alfField" required />
        <label>Search for an address</label>
    </template>
    <style>
    :host {
        display: flex;
        height: 48px;
        align-items: flex-end;
    }
    label {
        z-index: 1;
        width: 100%;
        pointer-events: none;
    }
    

    </style>

    <script>

        Polymer({
            is: "address-lookup-field",

            properties: {
                googleMapsKey: {
                    type: String
                },
                autoComplete: {
                    type: Object
                }
            },
            observers: [
  
            ],

            ready: function()
            {
                this.initAutoComplete();
            },

            initAutoComplete() {
                // Create the autocomplete object, restricting the search to geographical location types.
                this.autoComplete = new google.maps.places.Autocomplete(
                    this.$.alfField,
                    {
                        types: ['geocode']
                    }
                );

                this.autoComplete.addListener('place_changed', this.selectAddress.bind(this));
            },

            selectAddress: function () {
                var place = this.autoComplete.getPlace();
                this.dataHost.addressLookupLocation = place.geometry.location;
                this.fire('foundplace', place);
            }
        });
    </script>

</dom-module>